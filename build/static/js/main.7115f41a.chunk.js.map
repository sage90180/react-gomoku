{"version":3,"sources":["globalStyle.js","utils.js","Chess.js","Button.js","App.js","index.js"],"names":["ResetStyle","createGlobalStyle","GlobalStyle","countTotal","board","currentY","currentX","directionX","directionY","now","tempX","tempY","total","Col","styled","div","props","$row","$col","ChessElement","$value","Chess","row","col","value","onClick","handleClick","useCallback","memo","Btn","button","Button","children","WinnerModal","ModalInner","BtnWrap","Wrap","StepsWrap","BoardWrap","Row","NxtPlayer","Player","className","App","useState","Array","fill","setBoard","isBlackMoving","useRef","history","setHistory","lastRow","lastCol","updateBoard","y","x","newValue","map","handleChessClick","current","concat","handleRestartClick","window","location","reload","wineer","setWineer","useEffect","undefined","every","findWinner","slice","length","rowIndex","colIndex","steps","indexMove","step","console","log","ReactDOM","render","document","getElementById"],"mappings":"86DACO,IAAMA,EAAaC,YAAH,KAyEVC,EAAcD,YAAH,K,OC1ExB,SAASE,EAAWC,EAAOC,EAAUC,EAAUC,EAAYC,GAOzD,IALA,IAAMC,EAAML,EAAMC,GAAUC,GAExBI,EAAQJ,EACRK,EAAQN,EACRO,EAAQ,IACT,CAKD,GAJAF,GAASH,GAILH,EAHJO,GAASH,IAGWJ,EAAMO,GAAOD,KAAWD,EAI1C,MAFAG,IAMJ,OAAOA,E,+6BCjBT,IAAMC,EAAMC,IAAOC,IAAV,KAqBH,SAACC,GAAD,OACe,IAAfA,EAAMC,MAAN,6BAKA,SAACD,GAAD,OACe,KAAfA,EAAMC,MAAN,gCAgBA,SAACD,GAAD,OACe,IAAfA,EAAME,MAAN,8BAKA,SAACF,GAAD,OACe,KAAfA,EAAME,MAAN,+BAOAC,EAAeL,IAAOC,IAAV,KAUd,SAACC,GAAD,MACiB,UAAjBA,EAAMI,QAAN,iJAWA,SAACJ,GAAD,MACiB,UAAjBA,EAAMI,QAAN,oLAcEC,EAAQ,SAAC,GAAkC,IAAhCC,EAA+B,EAA/BA,IAAKC,EAA0B,EAA1BA,IAAKC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,QAC1BC,EAAcC,uBAAY,WAC9BF,EAAQH,EAAKC,EAAKC,KACjB,CAACF,EAAKC,EAAKC,EAAOC,IAErB,OACE,cAACZ,EAAD,CAAKI,KAAMK,EAAKJ,KAAMK,EAAKE,QAASC,EAApC,SACE,cAACP,EAAD,CAAcC,OAAQI,OAKbI,iBAAKP,G,mRC3GpB,IAAMQ,EAAMf,IAAOgB,OAAV,KAWHC,EAAS,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,SAAUP,EAAc,EAAdA,QAC1B,OAAO,cAACI,EAAD,CAAKJ,QAASA,EAAd,SAAwBO,KAGlBJ,iBAAKG,G,kgFCXpB,IAAME,EAAcnB,IAAOC,IAAV,KAwBXmB,EAAapB,IAAOC,IAAV,KAgBVoB,EAAUrB,IAAOC,IAAV,KAKPqB,EAAOtB,IAAOC,IAAV,KAIJsB,EAAYvB,IAAOC,IAAV,KA8BTuB,EAAYxB,IAAOC,IAAV,KAsBTwB,EAAMzB,IAAOC,IAAV,KAIHyB,EAAY1B,IAAOC,IAAV,KAWT0B,EAAS,SAAC,GAAkB,IAAhBT,EAAe,EAAfA,SAChB,OACE,eAACQ,EAAD,WACE,kEACA,qBAAKE,UAAU,SAAf,SAAyBV,QAuIhBW,MAlIf,WACE,IADa,EAEaC,mBAASC,MADtB,IACkCC,KAAKD,MADvC,IACmDC,KAAK,QAFxD,mBAEN1C,EAFM,KAEC2C,EAFD,KAIPC,EAAgBC,kBAAO,GAJhB,EAMiBL,mBAAS,CAAC,OAN3B,mBAMNM,EANM,KAMGC,EANH,KAQPC,EAAUH,mBACVI,EAAUJ,mBAEVK,EAAc3B,uBAAY,SAAC4B,EAAGC,EAAGC,GACrCV,GAAS,SAAC3C,GAAD,OACPA,EAAMsD,KAAI,SAACpC,EAAKjB,GAEd,OAAIA,IAAakD,EAAUjC,EAGpBA,EAAIoC,KAAI,SAACnC,EAAKjB,GACnB,OAAIA,IAAakD,EAAUjC,EACpBkC,aAIZ,IAEGE,EAAmBhC,uBACvB,SAACL,EAAKC,EAAKC,GAEK,OAAVA,IAEJ4B,EAAQQ,QAAUtC,EAClB+B,EAAQO,QAAUrC,EAClB+B,EAAYhC,EAAKC,EAAKyB,EAAcY,QAAU,QAAU,SACxDZ,EAAcY,SAAWZ,EAAcY,QACvCT,EAAWD,EAAQW,OAAO,CAAC,CAAEzD,eAE/B,CAACkD,EAAaJ,IAGVY,EAAqB,WACzBC,OAAOC,SAASC,UAzCL,EA+DerB,qBA/Df,mBA+DNsB,EA/DM,KA+DEC,EA/DF,KAqEb,OALAC,qBAAU,gBACgBC,IAApBjB,EAAQQ,cAA6CS,IAApBhB,EAAQO,SAC7CO,EH/KG,SAAoB/D,EAAOmD,EAAGC,GACnC,OACErD,EAAWC,EAAOmD,EAAGC,EAAG,EAAG,GAAKrD,EAAWC,EAAOmD,EAAGC,GAAI,EAAG,IAAM,GAClErD,EAAWC,EAAOmD,EAAGC,EAAG,EAAG,GAAKrD,EAAWC,EAAOmD,EAAGC,EAAG,GAAI,IAAM,GAClErD,EAAWC,EAAOmD,EAAGC,EAAG,EAAG,GAAKrD,EAAWC,EAAOmD,EAAGC,GAAI,GAAI,IAAM,GACnErD,EAAWC,EAAOmD,EAAGC,EAAG,GAAI,GAAKrD,EAAWC,EAAOmD,EAAGC,GAAI,EAAG,IAAM,EAE5DpD,EAAMmD,GAAGC,GAGdpD,EAAMkE,OAAM,SAAChD,GAAD,OAASA,EAAIgD,OAAM,SAAC/C,GAAD,OAASA,QACnC,YADT,EGqKYgD,CAAWnE,EAAOgD,EAAQQ,QAASP,EAAQO,YACpD,CAACxD,IAGF,qCACG8D,GACC,cAACjC,EAAD,UACE,eAACC,EAAD,WACc,SAAXgC,GAAqB,eACV,UAAXA,GAAsB,uCACX,UAAXA,GAAsB,uCACvB,uBACA,wBAAQzC,QAASqC,EAAjB,2CAIN,eAAC1B,EAAD,WACE,qCACE,eAACD,EAAD,WACE,cAAC,EAAD,CAAQV,QA5BU,WAC1B0B,EAAWD,EAAQsB,MAAM,EAAGtB,EAAQuB,OAAS,IAC7C1B,EAASG,EAAQA,EAAQuB,OAAS,GAAGrE,OACrC4C,EAAcY,SAAWZ,EAAcY,SAyB/B,gCACA,cAAC,EAAD,UAASZ,EAAcY,QAAU,eAAO,iBACxC,cAAC,EAAD,CAAQnC,QAASqC,EAAjB,mCAEF,cAACxB,EAAD,UACGlC,EAAMsD,KAAI,SAACpC,EAAKoD,GACf,OACE,cAACnC,EAAD,UACGjB,EAAIoC,KAAI,SAACnC,EAAKoD,GACb,OACE,cAAC,EAAD,CAEErD,IAAKoD,EACLnD,IAAKoD,EACLnD,MAAOpB,EAAMsE,GAAUC,GACvBlD,QAASkC,GAJJgB,OAJHD,WAiBlB,eAACrC,EAAD,WACE,8CACA,6BACGa,EAAQQ,KACP,SAACkB,EAAOC,GAAR,OACgB,IAAdA,GACE,oBAEEpD,QAAS,WAzEH,IAACqD,KAyEwBD,IAxEnC3B,EAAQuB,OAAS,IAE3BzB,EAAcY,QADZkB,EAAO,IAAM,EAKjBC,QAAQC,IAAIhC,GACZG,EAAWD,EAAQsB,MAAM,EAAGM,EAAO,IACnC/B,EAASG,EAAQ4B,EAAO,GAAG1E,OAC3B2E,QAAQC,IAAI9B,EAAQuB,UA6DN,SAIGI,GAHIA,kBClPzBI,IAASC,OACP,qCACE,cAAClF,EAAD,IACA,cAACE,EAAD,IACA,cAAC,EAAD,OAEFiF,SAASC,eAAe,W","file":"static/js/main.7115f41a.chunk.js","sourcesContent":["import { createGlobalStyle } from \"styled-components\";\nexport const ResetStyle = createGlobalStyle`\nhtml, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  box-sizing: border-box;\n}\naddress, caption, cite, code, dfn, em, strong, th, var, b {\n  font-weight: normal;\n  font-style: normal;\n}\nabbr, acronym {\n  border: 0;\n}\narticle, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {\n  display: block;\n}\n*,\n*::after,\n*::before {\n  margin: 0;\n  padding: 0;\n  box-sizing: inherit;\n}\nhtml {\n  text-size-adjust: 100%;\n  box-sizing: border-box;\n}\nbody {\n    line-height: 1;\n}\nol, ul {\n  list-style: none;\n}\nblockquote, q {\n  quotes: none;\n}\nblockquote {\n  &:before,   &:after {\n    content: '';\n    content: none;\n  }\n}\nq {\n  &:before,   &:after {\n    content: '';\n    content: none;\n  }\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\ncaption, th {\n  text-align: left;\n}\ntextarea {\n  resize: none;\n}\na {\n  text-decoration: none;\n  cursor: pointer;\n}\nbutton {\n  padding: 0;\n  border: none;\n  background: none;\n}\n`;\n\nexport const GlobalStyle = createGlobalStyle`\nbody,html {\n  background: #F0C56A;\n  display: flex;\n  justify-content: center;\n  margin-top:30px;\n}\n`;\n","function countTotal(board, currentY, currentX, directionX, directionY) {\n  // 現在要檢查的棋子是什麼顏色\n  const now = board[currentY][currentX];\n\n  let tempX = currentX;\n  let tempY = currentY;\n  let total = 0;\n  do {\n    tempX += directionX; // 檢查下一顆棋子\n    tempY += directionY;\n\n    // 如果新的棋子等於我現在要檢查的（意思就是連續啦）\n    if (board[tempY] && board[tempY][tempX] === now) {\n      // 連續的棋子數 + 1\n      total++;\n    } else {\n      break;\n    }\n  } while (true);\n\n  return total;\n}\n\nexport function findWinner(board, y, x) {\n  if (\n    countTotal(board, y, x, 1, 0) + countTotal(board, y, x, -1, 0) >= 4 ||\n    countTotal(board, y, x, 0, 1) + countTotal(board, y, x, 0, -1) >= 4 ||\n    countTotal(board, y, x, 1, 1) + countTotal(board, y, x, -1, -1) >= 4 ||\n    countTotal(board, y, x, 1, -1) + countTotal(board, y, x, -1, 1) >= 4\n  ) {\n    return board[y][x];\n  }\n\n  if (board.every((row) => row.every((col) => col))) {\n    return \"draw\";\n  }\n}\n","import { memo, useCallback } from \"react\";\nimport styled from \"styled-components\";\n\nconst Col = styled.div`\n  width: 30px;\n  height: 30px;\n  position: relative;\n  z-index: 998;\n  cursor: pointer;\n  &:hover {\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\n    background: rgba(0, 0, 0, 0.1);\n    border-radius: 50px;\n  }\n  &:before {\n    content: \"\";\n    height: 100%;\n    width: 2px;\n    background: #777;\n    position: absolute;\n    top: 0;\n    left: 50%;\n    transform: translateX(-50%);\n\n    ${(props) =>\n      props.$row === 0 &&\n      `\n      top: 50%;\n    `}\n\n    ${(props) =>\n      props.$row === 18 &&\n      `\n      height: 50%;\n    `}\n  }\n\n  &:after {\n    content: \"\";\n    width: 100%;\n    height: 2px;\n    background: #777;\n    position: absolute;\n    top: 50%;\n    left: 0;\n    transform: translateY(-50%);\n\n    ${(props) =>\n      props.$col === 0 &&\n      `\n      left: 50%;\n    `}\n\n    ${(props) =>\n      props.$col === 18 &&\n      `\n      width: 50%;\n    `}\n  }\n`;\n\nconst ChessElement = styled.div`\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  position: absolute;\n  transform: scale(0.75);\n  top: 0;\n  left: 0;\n  z-index: 998;\n\n  ${(props) =>\n    props.$value === \"black\" &&\n    `\n    background: radial-gradient(\n      circle at 35% 25%,\n      #999 0%,\n      #000 90%,\n      #666 95%,\n      #999 100%\n    );\n  `}\n\n  ${(props) =>\n    props.$value === \"white\" &&\n    `\n    background: radial-gradient(\n      circle at 35% 25%,\n      white 0%,\n      #eee 30%,\n      #ccc 60%,\n      #bbb 80%,\n      #aaa 95%,\n      #999 100%\n    );\n  `}\n`;\n\nconst Chess = ({ row, col, value, onClick }) => {\n  const handleClick = useCallback(() => {\n    onClick(row, col, value);\n  }, [row, col, value, onClick]);\n\n  return (\n    <Col $row={row} $col={col} onClick={handleClick}>\n      <ChessElement $value={value} />\n    </Col>\n  );\n};\n\nexport default memo(Chess);\n","import { memo } from \"react\";\nimport styled from \"styled-components\";\n\nconst Btn = styled.button`\n  margin: 10px 0px;\n  font-size: 18px;\n  font-weight: 500;\n  border: solid 2px white;\n  padding: 3px 10px;\n  letter-spacing: 2px;\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.4);\n  cursor: pointer;\n`;\n\nconst Button = ({ children, onClick }) => {\n  return <Btn onClick={onClick}>{children}</Btn>;\n};\n\nexport default memo(Button);\n","import React, { useState, useCallback, useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { findWinner } from \"./utils\";\n\nimport Chess from \"./Chess\";\nimport Button from \"./Button\";\n\nconst WinnerModal = styled.div`\n  position: absolute;\n  background: rgba(0, 0, 0, 0.4);\n  left: 0px;\n  right: 0px;\n  top: 0px;\n  bottom: 0px;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  button {\n    background: rgba(255, 255, 255, 0.2);\n    margin-top: 20px;\n    font-size: 18px;\n    font-weight: 500;\n    border: solid 2px white;\n    padding: 3px 10px;\n    letter-spacing: 2px;\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.4);\n    cursor: pointer;\n  }\n`;\n\nconst ModalInner = styled.div`\n  color: white;\n  background: rgba(210, 35, 35, 0.9);\n  height: 200px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  font-size: 80px;\n  font-weight: 900;\n  font-style: italic;\n  box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.3);\n  letter-spacing: 3px;\n`;\n\nconst BtnWrap = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst Wrap = styled.div`\n  display: flex;\n`;\n\nconst StepsWrap = styled.div`\n  margin-left: 20px;\n  font-size: 20px;\n  text-align: center;\n  h1 {\n    margin: 20px 0px;\n  }\n  ul {\n    max-height: 580px;\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: column;\n  }\n  li {\n    background: rgba(255, 255, 255, 0.3);\n    color: #a57000;\n    font-weight: 900;\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\n    padding: 2px;\n    font-size: 15px;\n    margin: 5px;\n    width: 30px;\n    height: 20px;\n    cursor: pointer;\n  }\n  li:last-child {\n    background: rgba(255, 255, 255, 0.8);\n  }\n`;\n\nconst BoardWrap = styled.div`\n  width: 570px;\n  height: 570px;\n  background: white;\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.4);\n  display: flex;\n  align-content: flex-start;\n  flex-wrap: wrap;\n  position: relative;\n  box-sizing: border-box;\n  &:after {\n    content: \"\";\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    width: 570px;\n    height: 570px;\n    border: solid 15px #666;\n    z-index: 1;\n  }\n`;\n\nconst Row = styled.div`\n  display: flex;\n`;\n\nconst NxtPlayer = styled.div`\n  text-align: center;\n  font-size: 15px;\n  letter-spacing: 2px;\n  .player {\n    font-size: 23px;\n    line-height: 35px;\n    font-weight: 900;\n  }\n`;\n\nconst Player = ({ children }) => {\n  return (\n    <NxtPlayer>\n      <span>下一位玩家</span>\n      <div className=\"player\">{children}</div>\n    </NxtPlayer>\n  );\n};\n\nfunction App() {\n  const SIZE = 19;\n  const [board, setBoard] = useState(Array(SIZE).fill(Array(SIZE).fill(null)));\n\n  const isBlackMoving = useRef(true);\n\n  const [history, setHistory] = useState([null]);\n\n  const lastRow = useRef();\n  const lastCol = useRef();\n\n  const updateBoard = useCallback((y, x, newValue) => {\n    setBoard((board) =>\n      board.map((row, currentY) => {\n        // 如果這一個橫排不是我要改的，直接回傳即可\n        if (currentY !== y) return row;\n\n        // 如果是的話，找到我要改的那個 x 的位置\n        return row.map((col, currentX) => {\n          if (currentX !== x) return col;\n          return newValue;\n        });\n      })\n    );\n  }, []);\n\n  const handleChessClick = useCallback(\n    (row, col, value) => {\n      // 已經下過了\n      if (value !== null) return;\n\n      lastRow.current = row;\n      lastCol.current = col;\n      updateBoard(row, col, isBlackMoving.current ? \"black\" : \"white\");\n      isBlackMoving.current = !isBlackMoving.current;\n      setHistory(history.concat([{ board }]));\n    },\n    [updateBoard, history]\n  );\n\n  const handleRestartClick = () => {\n    window.location.reload();\n  };\n\n  const handleStepClick = (step) => {\n    if (step == history.length - 1) return;\n    if (step % 2 === 0) {\n      isBlackMoving.current = true;\n    } else {\n      isBlackMoving.current = false;\n    }\n    console.log(isBlackMoving);\n    setHistory(history.slice(0, step + 1));\n    setBoard(history[step + 1].board);\n    console.log(history.length);\n  };\n\n  const handlePreviousClick = () => {\n    setHistory(history.slice(0, history.length - 1));\n    setBoard(history[history.length - 1].board);\n    isBlackMoving.current = !isBlackMoving.current;\n  };\n\n  const [wineer, setWineer] = useState();\n  useEffect(() => {\n    if (lastRow.current === undefined || lastCol.current === undefined) return;\n    setWineer(findWinner(board, lastRow.current, lastCol.current));\n  }, [board]);\n\n  return (\n    <>\n      {wineer && (\n        <WinnerModal>\n          <ModalInner>\n            {wineer === \"draw\" && \"平手\"}\n            {wineer === \"black\" && \"獲勝的是黑子\"}\n            {wineer === \"white\" && \"獲勝的是白子\"}\n            <br />\n            <button onClick={handleRestartClick}>再玩一次</button>\n          </ModalInner>\n        </WinnerModal>\n      )}\n      <Wrap>\n        <mainWrap>\n          <BtnWrap>\n            <Button onClick={handlePreviousClick}>上一步</Button>\n            <Player>{isBlackMoving.current ? \"黑子\" : \"白子\"}</Player>\n            <Button onClick={handleRestartClick}>開新局</Button>\n          </BtnWrap>\n          <BoardWrap>\n            {board.map((row, rowIndex) => {\n              return (\n                <Row key={rowIndex}>\n                  {row.map((col, colIndex) => {\n                    return (\n                      <Chess\n                        key={colIndex}\n                        row={rowIndex}\n                        col={colIndex}\n                        value={board[rowIndex][colIndex]}\n                        onClick={handleChessClick}\n                      />\n                    );\n                  })}\n                </Row>\n              );\n            })}\n          </BoardWrap>\n        </mainWrap>\n        <StepsWrap>\n          <h1>步數</h1>\n          <ul>\n            {history.map(\n              (steps, indexMove) =>\n                indexMove !== 0 && (\n                  <li\n                    key={indexMove}\n                    onClick={() => handleStepClick(indexMove)}\n                  >\n                    {indexMove}\n                  </li>\n                )\n            )}\n          </ul>\n        </StepsWrap>\n      </Wrap>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ResetStyle, GlobalStyle } from \"./globalStyle\";\n\nimport App from \"./App\";\n\nReactDOM.render(\n  <>\n    <ResetStyle />\n    <GlobalStyle />\n    <App />\n  </>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}